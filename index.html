<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNI.LIBRARY</title>
    <link rel="shortcut icon" href="imagens/demon_slayer_icon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
        integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="app.js">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
        integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>

<body>
    <div class="teste bg-dark"
        style="background-image: linear-gradient(
        to bottom,
        rgba(32,32,32,.8) 0%,
        rgba(32, 32, 32, 0.2) 40%,
        rgba(32, 32, 32, 0.2) 80%,
        rgb(32, 32, 32) 100%
    ),
    url(https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNTdhYWUwMmY5NWU1OWJmOTRjY2IzMDBkNDNkNWM2YzdjNTk4MDU2OCZjdD1n/KUsBAKV7zBoc1rADlQ/giphy.gif);">
        <!--Inicio do hero-->
        <div class="hero">
            <nav class="navbar ">
                <b><a class="navbar-brand text-white" style="margin-top: 3%;">UNI.LIBRARY</a></b>
                <div class="container d-flex">
                    <a class="text-start text-white ms-auto" style="margin-top: 3%; cursor: pointer;" id="EmAlta">Em
                        Alta</a>
                    <a class="text-start text-white" style="margin-top: 3%; margin-right: 5px;cursor: pointer;"
                        id="Populares">Populares</a>
                    <a class="text-start text-white" style="margin-top: 3%; margin-right: 5px;cursor: pointer;"
                        id="Top10">Top 10</a>
                    <a class="text-start text-white ms-auto" style="margin-top: 3%;cursor: pointer;"
                        id="Recomendados">Recomendações</a>
                    <a class="text-start text-white" style="margin-top: 3%; margin-right: 5px;cursor: pointer;"
                        id="Novidades">Novidades</a>


                    <a class="text-start text-white" style="margin-top: 3%; margin-right: 5px;cursor: pointer;"
                        id="Descubra">Descubra ++</a>
               
                    <form class="d-flex" id="search_form" style="margin-top: 3%; ">
                        
                        <input class="form-control col-md-6 offset-md-7 bg-transparent text-white" type="search" placeholder="pesquise" name="search" id="search">
                    
                        <label for="search" id="teste-pesquisa"></label>
                    
                    </form>


                    <!--Scroll's para tópicos específicos-->
                    <script>
                        const searchBtn = document.getElementById("search");
                        searchBtn.addEventListener("search", function (event) {
                            event.preventDefault();

                            const searchResults = document.getElementById("ponto");
                            searchResults.scrollIntoView({ behavior: "smooth" });
                        });

                    </script>

                    <!--Scroll | Em Alta -->
                    <script>
                        const EmAlta = document.getElementById("EmAlta");
                        EmAlta.addEventListener("click", function (event) {
                            event.preventDefault();

                            const resultado = document.getElementById("Topico_Alta");
                            resultado.scrollIntoView({ behavior: "smooth" });
                        });

                    </script>

                    <!--Scroll | Populares -->
                    <script>
                        const populares = document.getElementById("Populares");
                        populares.addEventListener("click", function (event) {
                            event.preventDefault();

                            const resultado = document.getElementById("Topico_populares");
                            resultado.scrollIntoView({ behavior: "smooth" });
                        });

                    </script>

                    <!--Scroll | Top10 -->
                    <script>
                        const Top10 = document.getElementById("Top10");
                        Top10.addEventListener("click", function (event) {
                            event.preventDefault();

                            const resultado = document.getElementById("Topico_top");
                            resultado.scrollIntoView({ behavior: "smooth" });
                        });

                    </script>


                    <!--Scroll | Recomendados -->
                    <script>
                        const Recomendados = document.getElementById("Recomendados");
                        Recomendados.addEventListener("click", function (event) {
                            event.preventDefault();

                            const resultado = document.getElementById("Topico_Recomendados");
                            resultado.scrollIntoView({ behavior: "smooth" });
                        });

                    </script>

                    <!--Scroll | Novidades -->
                    <script>
                        const Novidades = document.getElementById("Novidades");
                        Novidades.addEventListener("click", function (event) {
                            event.preventDefault();

                            const resultado = document.getElementById("Topico_Novidades");
                            resultado.scrollIntoView({ behavior: "smooth" });
                        });

                    </script>

                    <!--Scroll | Descubra -->
                    <script>
                        const Descubra = document.getElementById("Descubra");
                        Descubra.addEventListener("click", function (event) {
                            event.preventDefault();

                            const resultado = document.getElementById("Topico_Descubra");
                            resultado.scrollIntoView({ behavior: "smooth" });
                        });

                    </script>


                </div>
            </nav>


            <div class="overflow-auto text-white" style="margin-top: 10%;">
                <p style="font-size:40px">Explore o universo dos animes com nossa<br> biblioteca digital especializada
                </p>
                <p style="font-size:25px;margin-top: 3%;">Milhares de títulos disponíveis para leitura em qualquer
                    lugar, a qualquer hora.</p>
                <button type="button" class="btn btn-dark" style="opacity: 75%;">Assistir</button> <button type="button"
                    class="btn btn-dark" style="opacity: 75%;">Minha lista</button>
            </div>


            <!-- Retorna animes promovidos pela API -->
            <div class="category" style="margin-top: 13rem; margin-bottom: 26rem;">
                <span id="Topico_Alta">EM ALTA</span>
                <div class="slider mb-2" id="videos" style="margin-bottom: 6rem;">
                    <script>
                        fetch(`https://api.jikan.moe/v4/watch/promos/popular`)
                            .then((data) => {
                                return data.json();
                            })
                            .then((completedata) => {
                                console.log(completedata);
                                let data1 = "";
                                completedata.data.slice(2, 14).map((rec) => {
                                    data1 += `<iframe class="video" width="860px" height="315px" src="https:\/\/www.youtube.com\/embed\/${rec.trailer.youtube_id}?enablejsapi=1&wmode=opaque&autoplay=0"  frameborder="0" allowfullscreen></iframe>`
                                });
                                document.getElementById("videos").innerHTML = data1;
                            })
                            .catch((err) => {
                                console.log(err);
                            });

                        async function minhaFuncaoAssincrona() {
                            try {
                                const response = await fetch(`https://api.jikan.moe/v4/watch/promos/popular`);
                                const completedata = await response.json();
                                console.log(completedata);
                                let data1 = "";
                                completedata.data.slice(2, 14).map((rec) => {
                                    data1 += `<iframe class="video" width="860px" height="315px" src="https:\/\/www.youtube.com\/embed\/${rec.trailer.youtube_id}?enablejsapi=1&wmode=opaque&autoplay=0" style="margin-bottom:1rem"  frameborder="0" allowfullscreen></iframe>`
                                });
                                document.getElementById("videos").innerHTML = data1;
                            } catch (err) {
                                console.log(err);
                            }
                        }

                        minhaFuncaoAssincrona();


                    </script>
                </div>
            </div>

            <!-- Retorna eps populares no my anime list -->
            <div class="category">
                <span id="Topico_populares">EPISÓDIOS POPULARES</span>
                <div class="slider" id="populares">
                    <script>
                        fetch(`https://api.jikan.moe/v4/watch/episodes/popular`)
                            .then((data) => {
                                return data.json();
                            })
                            .then((completedata) => {
                                console.log(completedata.data);
                                let data1 = "";
                                completedata.data.slice(0, 30).map((data) => {
                                    if (!data.region_locked) { // Precisei fazer isso para verificar se o endereço se pesquisa está disponível
                                        data1 += `<a href="${data.episodes[0].url}" class="imagem">
                <img class="movie" src="${data.entry.images.jpg.large_image_url}"  style="margin-bottom:1rem" alt="...">
                </a>`;
                                    }
                                });
                                document.getElementById("populares").innerHTML = data1;
                            })
                            .catch((err) => {
                                console.log(err);
                            });

                        async function minhaFuncaoAssincrona() {
                            try {
                                const response = await fetch(`https://api.jikan.moe/v4/watch/episodes/popular`);
                                const completedata = await response.json();
                                console.log(completedata.data);
                                let data1 = "";
                                completedata.data.slice(0, 30).map((data) => {
                                    if (!data.region_locked) { // Precisei fazer isso para verificar se o endereço se pesquisa está disponível
                                        data1 += `<a href="${data.episodes[0].url}" class="imagem">
                <img class="movie" src="${data.entry.images.jpg.large_image_url}"  style="margin-bottom:1rem" alt="...">
                </a>`;
                                    }
                                });
                                document.getElementById("populares").innerHTML = data1;
                            } catch (err) {
                                console.log(err);
                            }
                        }

                        minhaFuncaoAssincrona();


                    </script>
                </div>
            </div>

            <!-- Retorna os TOP 10 animes do my anime list -->
            <div class="category">
                <span id="Topico_top">TOP 10 ANIMES</span>

                <div class="slider" id="show-results">
                    <script>
                        fetch(`https://api.jikan.moe/v4/top/anime`)
                            .then((data) => {
                                //console.log(data);
                                return data.json();
                            })
                            .then((completedata) => {
                                //console.log(completedata.data);
                                let data1 = "";
                                completedata.data.slice(0, 30).map((values) => {
                                    data1 += `
                <a href="${values.url}" class="imagem">
                    <img class="movie" src="${values.images.jpg.large_image_url}"  style="margin-bottom:1rem;" alt="...">
                </a>
            `;
                                });
                                document.getElementById('show-results').innerHTML = data1;
                            })
                            .catch((err) => {
                                console.log(err);
                            });

                        async function minhaFuncaoAssincrona() {
                            try {
                                const response = await fetch(`https://api.jikan.moe/v4/top/anime`);
                                const completedata = await response.json();
                                //console.log(completedata.data);
                                let data1 = "";
                                completedata.data.slice(0, 30).map((values) => {
                                    data1 += `
                <a href="${values.url}" class="imagem">
                    <img class="movie" src="${values.images.jpg.large_image_url}"  style="margin-bottom:1rem;" alt="...">
                </a>
            `;
                                });
                                document.getElementById('show-results').innerHTML = data1;
                            } catch (err) {
                                console.log(err);
                            }
                        }

                        minhaFuncaoAssincrona();
                    </script>
                </div>
            </div>


            <div class="category" style="margin-top: 20%; margin-bottom: 20%;">
                <button type="button" class="btn btn-light"
                    style="opacity: 65%; height: 50%; width: 50%; margin-left: 25%;align-items: center;"
                    id="jikan-button">
                    <h3 class="text-warning" id="Topico_Descubra"
                        style="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
                        DESCUBRA UM ANIME!!
                    </h3>
                </button>

                <div class="results-descubra" id="jikan-list"
                    style="margin-top: 3%; align-items: center; text-align: center;">
                    <script>
                        const jikanButton = document.getElementById("jikan-button");
                        const jikanList = document.getElementById("jikan-list");
                        let displayedResults = [];

                        function getJikanResults() {
                            fetch('https://api.jikan.moe/v4/random/anime?&genre_exclude=18,43')
                                .then(response => response.json())
                                .then(data => {
                                    const result = data.data;

                                    if (displayedResults.includes(result.mal_id)) {
                                        console.log("Resultado já retornado");
                                        return getJikanResults();
                                    }

                                    displayedResults.push(result.mal_id);
                                    jikanList.innerHTML = '';

                                    const li = document.createElement("li");

                                    const a = document.createElement("a");
                                    a.href = result.url;
                                    a.className = "imagem";

                                    const img = document.createElement("img");
                                    img.className = "movie";
                                    img.src = result.images.jpg.image_url;
                                    img.alt = result.title;

                                    a.appendChild(img);

                                    li.appendChild(a);

                                    jikanList.appendChild(li);
                                })
                                .catch(error => console.error(error));
                        }
                        jikanButton.addEventListener("click", getJikanResults);
                    </script>
                </div>
            </div>

            <div class="category" style="margin-top: 14rem;">
                <span id="Topico_Recomendados">ANIMES RECOMENDADOS</span>
                <div class="slider" id="ind">

                    <script>
                        async function getRecommendations() {
                            try {
                                const response = await fetch('https://api.jikan.moe/v4/anime/1/recommendations');
                                const data = await response.json();

                                let data1 = "";
                                data.data.slice(0, 30).map((rec) => {
                                    data1 += `<a href="${rec.url}" class="imagem">
            <img class="movie" src="${rec.entry.images.jpg.large_image_url}" style="margin-bottom:1rem;" alt="..."></a>`;
                                });

                                document.getElementById("ind").innerHTML = data1;

                            } catch (err) {
                                console.log(err);
                            }
                        }

                        getRecommendations();


                    </script>
                </div>
            </div> <!-- Fechamento das categorias -->
            <div class="category" style="margin-top: 13rem">
                <span id="Topico_Novidades">NOVIDADES</span>
                <div class="slider mb-2" id="videos-2" style="margin-bottom: 6rem;">
                    <script>
                        (async () => {
                            try {
                                const response = await fetch('https://api.jikan.moe/v4/watch/promos/popular');
                                const data = await response.json();
                                console.log(data);
                                let data1 = "";
                                data.data.slice(14, 24).map((rec) => {
                                    data1 += `<iframe class="video" width="860px" height="315px" src="https:\/\/www.youtube.com\/embed\/${rec.trailer.youtube_id}?enablejsapi=1&wmode=opaque&autoplay=0"  frameborder="0" allowfullscreen="true" style="margin-bottom:1rem;"></iframe>`
                                });
                                document.getElementById("videos-2").innerHTML = data1;
                            } catch (err) {
                                console.log(err);
                            }
                        })();


                    </script>
                </div>
            </div>
        </div>



        <div class="teste-espaco overflow-auto">
            <div class="category" id="scroll-resultados">
                <div class="slider-resultado" id="search-results" style="margin-top: 1%">
                </div>

            </div>
            <br>
            <br>
            <br>
            <br>
            <div class="ponto">
                <p id="ponto">.</p>
            </div>
        </div>
    </div>

    <script src="./App.js"></script>
</body>

</html>
